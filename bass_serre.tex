\documentclass[tesis.tex]{subfiles}

%\newcommand{\ol}{\overline{}}
\newcommand{\ic}{independiente de contexto }
\newcommand{\APND}{automáta de pila no determinístico }
\newcommand{\APD}{automáta de pila determinístico }
\newcommand{\fg}{grupo finitamente generado }
\newcommand{\fp}{grupo finitamente presentado }
\newcommand{\vl}{virtualmente libre}
\newcommand{\WP}{\text{WP}(G, \Sigma)}
\newcommand{\deriva}{\overset{*}{\Rightarrow_{\cal G}}}
\newcommand{\cG}{ {\cal G} }
\newcommand{\cH}{ {\cal H} }
\newcommand{\Xm}{\widetilde X}


\begin{document}

\chapter{Teoría de Bass Serre.}

Introduciremos los resultados y definiciones más importantes de la teoría de Bass Serre. 
Las referencias clásicas que seguiremos son \cite{serre2002trees} y \cite{}.
En esta sección los grafos serán siempre conexos y dirigidos.
Dado un grafo $Y= (V(Y),E(Y))$ por cada arista $y \in E(Y)$ tendremos una designación $s(y) = P, t(y) = Q$ si la arista comienza en $P$ y termina en $Q$.
Denotaremos $\overline y$ la arista con asignación opuesta, esto es que $s(\ol y) = Q, t(\ol y) = P$.
Una \blue{orientación} de las aristas es una función $o:E(Y) \to \{ 0 ,1 \}$ tal que si $o(y)=1$ luego $o(\ol y)= 0$.

\begin{deff}
	Un \blue{grafo de grupos $\cal G$ sobre $Y$} está definido por lo siguiente:
	\begin{enumerate}
		\item Para cada vértice $P \in V(Y)$ tenemos un grupo $G_P$.
		\item  Para cada arista $y \in E(Y)$ tenemos un grupo $G_y$ tal que $G_y \le G_{s(y)}$ y $G_y \le G_{t(y)}$.
		\item Para todo $y \in E(Y)$ tenemos un isomorfismo de $G_y$ a $G_{\overline y}$ que denotaremos por $a \mapsto a^{\overline y} $ tal que $(a^{\overline y})^y  = a$ para todo $a \in G_y$.
	\end{enumerate}
\end{deff}

En general para la definición de grafo de grupos no es necesario pedir para la condición \textbf{2} que haya una contención sino que alcanza con tomar un monomorfismo. 
Para facilitar las construcciones más en adelante supondremos que es un subgrupo pero los argumentos se pueden readaptar en el caso de no suponerlo.

\todo[inline]{Hacer ejemplitos básicos de grafos de grupos.}

Dado un grafo $Y = (V(Y), E(Y))$ llamaremos $F_{E(Y)}$ al grupo libre  generado por las aristas del grafo.

\begin{deff}
	Dado un grafo de grupos $\cal G$ sobre un grafo $Y = (V(Y), E(Y))$ podemos armarnos el siguiente grupo 
	\begin{equation*}
		F({\cal G}) = \ast_{P \in V(Y)} G_P \ast F_{E(Y)} / \langle \langle  R \rangle \rangle
	\end{equation*}
	donde $R = \{  \overline y = y^{-1}, \ ya^yy^{-1} = a^{\overline y} \}$ para $y \in E(Y), a \in G_y$. 
\end{deff}

\begin{obs}
	Las relaciones $R$ por las que dividimos anteriormente se pueden condensar en 
	\[
	R = \{  ya^y \overline y = a^{\overline y}  \}.
	\]
\end{obs}

\begin{deff} \label{def_pi1_arbol}
	Sea un grafo de grupos $\cal G$ sobre $Y$.
	Consideremos $T$ un árbol de expansión del grafo $Y$.
	\footnote{Como suponemos que $Y$ es conexo existen (posiblemente varios) árboles de expansión.}
	Nos armamos el siguiente \blue{grupo fundamental del grafo de grupos}
	\begin{equation*}
		\pi_1({\cal G}, T) = F({\cal G}) / \{ y \  | \ y \in E(T)  \}.
	\end{equation*}
\end{deff}

Esto es que para todas las aristas que aparecen en el árbol de expansión las identificamos con el $1$. 
Esta definición se puede ver que en el caso particular de un grafo coincide con la definición que tenemos del grupo fundamental de un espacio topológico.

\begin{ej}
	Sea un grafo de grupos $\cal G$ sobre un grafo $Y$ tal que $G_y = \{ 1 \}$ para todo $y \in E(Y)$.
	Consideremos una orientación $A$ para las aristas del grafo esto es que para cada par de vértices unido por una arista $y$ tenemos que $y \in A \iff \overline y \notin A$.
	El grupo fundamental $\pi({\cal G}, T)$ está generado por los elementos $G_P, P \in V(Y)$ y los elementos $g_y \in A \setminus (T \cap A)$.
	Esto es que nos queda el siguiente grupo
	\[
	\pi_1({\cal G}, T) = \ast_{P \in V(Y)} G_P \ast F
	\]
	donde $F$ es el grupo libre con base $A \setminus (T \cap A)$.
	Esto es que nos queda $\pi_1({\cal G}, T) \simeq \pi_1(Y) \ast_{P \in V(Y)} G_P$.
\end{ej}

\begin{ej}
	Si el grafo es un segmento en particular él mismo es el árbol de expansión puesto que es un árbol.
	De esta manera si $Y$ es el siguiente segmento... \todo[inline]{Agregar gráfico}
	entonces
	\[
	\pi_1({\cal G}, Y) = G_P \ast_{G_y} G_Q.
	\]
\end{ej}

Podemos dar otra definición de grupo fundamental pero está vez usando caminos así como lo hacemos para el grupo fundamental usual.

\medskip
Dados dos vértices $P,Q \in V(Y)$ denotaremos por $\Pi(P,Q)$ el conjunto de caminos de $P$ a $Q$.
De esta manera nos queda definido
\[
\Pi(P,Q) = \{  y_1 \dots y_k \ | \ s(y_1)=P, \ t(y_k) = Q, \ t(y_i) = s(y_{i+1})  \ \text{para} \ 1 \le i \le k \}
\]
tal que estos son subconjuntos en $F(\cG)$ si miramos a las aristas como elementos del grupo.
En particular podemos tomar $g_0y_1g_1 \dots g_{k-1}y_kg_k \in F(\cG)$ tales que
\[
g_i \in G_{s(y_i)}, \ \ g_k \in G_Q,
\]
A estos subconjuntos los denotaremos $\pi(\cG, P, Q)$. 
En particular para todo $P \in V(Y)$ tenemos que $\pi(\cG,P,P)$ es un subgrupo de $F(\cG)$ esto porque si hacemos el producto entre dos elementos de este subconjunto tenemos que
\begin{equation*}
	(g_0y_1g_1 \dots g_{k-1}y_kg_k ) \circ ( g'_0y'_1g'_1 \dots g'_{k-1}y'_kg'_k) =  g_0y_1g_1 \dots g_{k-1}y_k(g_kg'_0)y'_1g'_1 \dots g'_{k-1}y'_kg'_k
\end{equation*}
donde $g_kg'_0 \in G_P$ por lo tanto su producto está bien definido y en definitiva nos queda otro elemento de $\pi(\cG, P, P)$ tal como queríamos ver.

\todo[inline]{Para ver que es un subgrupo tendría que ver que cumple las relaciones?}
\begin{deff}
	\blue{El grupo fundamental de $\cG$ respecto a un punto de base $P$} se define como $\pi_1(\cG, P) = \pi(\cG,P,P)$.
\end{deff}

Notemos que en particular para esta construcción obtuvimos un subgrupo del grupo $F(\cal G)$ mientras que en el caso de la definición anterior \ref{def_pi1_arbol} obtuvimos un cociente.
Podemos ver que ambas definiciones son equivalentes porque son isomorfos como grupos.

\begin{teo}
	$\pi_1({\cal G}, P)$ es isomorfo con $\pi_1({\cal G}, T)$.
\end{teo}
\begin{proof}
	Veamos que la composición de la inclusión $\iota: \pi_1( \cG ,P)  \to F(\cG)$ con la proyección $\pi: F(\cG) \to \pi_1(\cG, T)$ es un isomorfismo.
	
	Dados $P,Q \in V(Y)$ consideremos la geodésica $\alpha$ que los une sobre $T$.
	Si leemos la sucesión de aristas que recorre esta geodésica tenemos una palabra en $T(P,Q) \in F_{E(Y)}$ de manera que nos define un elemento en el grupo $F(\cG)$.
	Ahora definamos el siguiente morfismo (que depende del árbol de expansión que tomamos):
	
	\begin{align*}
		\tau: & F(\cG) \to \pi_1(\cG,P)  \\
		& \tau(y) = T[P,s(y)]yT[t(y),P] \ \ \text{para } \ y\in E(Y) \\
		& \tau(g) = T[P,Q] g T(Q,P) \ \  \text{para} \ Q \in V(Y), \ g \in G_Q
	\end{align*}
	
	Lo definimos sobre los generadores del producto libre y por como lo tomamos siempre nos devuelve un elemento de $\pi(\cG, P)$.
	Para ver que está bien definido debemos ver que cumple la relación $\tau(\overline y a^y y) = \tau (a^{\overline y})$ para toda arista $y \in E(Y)$.
	Esto vale porque justamente 
	\begin{align*}
		\tau(\overline y a^y y) & = T[P,s(\overline y)]\ol yT[t(\ol y),P] T[P,s(y)] a^y T[t(y),P] T[P,s(\overline y)]yT[t( y),P] \\
		& = T[P,s(\overline y)]  \ol y a^y y T[t( y),P] \\
		& = \tau (a^{\ol y}).
	\end{align*}
	Es un epimorfismo porque en particular todo elemento de $\pi_1(\cG, P)$ es un camino que termina y comienza en $P$ intercalado con elementos de los estabilizadores de los vértices que aparecen en el camino.
	De esta manera como $\tau(y)=1$ para todo $y \in E(T)$, notemos que pasa al cociente y existe $\ol \tau: \pi_{1}(\cG, T) \to \pi_1 (\cG, P)$ epimorfismo.
	
	Para terminar la demostración probemos que componiendo con $\nu$ nos queda la identidad.
	Si hacemos $\nu \circ \ol \tau$ notemos que 
	\begin{equation*}
		\nu \circ \ol \tau (a^y) = a^y, \ \ \nu \circ \ol \tau (y) = y, 
	\end{equation*}
	para $y \in E(Y) \setminus E(T)$ porque justamente estamos dividiendo por estas aristas. 
	Esto porque $T[P,Q]$ es un camino de aristas en el árbol de expansión por lo tanto sobre $\pi_1(\cG, T)$ son la identidad.
\end{proof}

\begin{teo}
	Para todo $P \in V(Y)$ vale que $G_P \le \pi_1(\cG)$. 
\end{teo}
\todo[inline]{Buscar una manera decente de probar este resultado. No es tan trivial como parece.}
\begin{proof}
	Demo no trivial porque no sabemos bien que al pasar al cociente todo siga andando. 
	Diekert supera este problema usando sistemas de reescrituras y eso lo vuelve más liviano.
\end{proof}

\section{Palabras reducidas.}

En esta sección vamos a intentar entender cómo son los elementos del grupo $F(\cG)$ que vamos a estar utilizando para probar nuestro resultado central de este capítulo.

Sea $c=(y_1, \dots, y_n) \in \Pi(P,Q)$ algún camino entre dos aristas $P,Q \in V(Y)$ y consideremos $\mu = (r_0, \dots r_n)$ una sucesión de elementos tomados de manera que $r_i \in G_{s(y_i)}$ tal como hicimos para la definición de $\pi(\cG, P)$.
Llamaremos al par $(c, \mu)$ visto como elemento en $\ast_{P \in V(Y)}G_P \ast E(Y)$ a 
\[
(c,\mu) = r_0 y_0 r_1 y_1 \dots r_n y_n.
\]
Nos interesa saber bajo qué condiciones estas palabras son reducidas en el grupo $F(\cG)$

\begin{deff}
	Una palabra $(c, \mu)$ es \blue{reducida} si satisface las siguientes dos propiedades:
	\begin{enumerate}[R1.]
		\item Si $n=0$ entonces $r_0 \neq 1$.
		\item Si $n \ge 1$ entonces $r_i \notin G_{y_i}$ para todo $i$ tal que $y_{i+1} = \ol y_{i}$.
	\end{enumerate}
\end{deff}
En particular si tomamos una palabra $(c, \mu)$ tal que el camino $c$ tiene backtracking por la propiedad \textbf{R2} tenemos que esta palabra no va a ser reducida.

Queremos ver que estas condiciones nos alcanzan para probar que estas palabras vistas en $F(\cG)$ son reducidas.
Para esto emplearemos una construcción previa que nos ayude a probarlo recursivamente a partir de grafos cada vez más chicos.

Consideremos un grafo de grupos $\cG$ sobre un grafo $Y$. 
Tomemos $Y'$ un subgrafo conexo de $Y$ y restrinjamos el grafo de grupos $\cG$ a $Y'$. 
Por inducción supongamos que vale el teorema \ref{} para este grafo $Y'$.

Sea $W = Y / Y'$  el grafo que obtenemos de contraer $Y'$ a un vértice que llamaremos $[Y']$. 
Como $Y'$ es conexo también lo es $W$.
Definamos un grafo de grupos sobre $W$.

\begin{enumerate}
	\item Los vértices son $V(W)= V(Y) \setminus V(Y') \cup \{ [Y'] \}$.
	\item Las aristas son $E(W) = E(Y) \setminus E(Y')$.
\end{enumerate}

Si las aristas no empiezan ni terminaban en $Y'$ dentro del grafo $Y$ al contraer el subgrafo siguen idénticas. 
En el otro caso las definimos para que terminen (o empiecen) en $[Y']$. Sea $y \in E(W)$ entonces,
\begin{equation*}
	s(y) = 
	\begin{cases}
	s(y),  & \text{si} \ s(y) \notin V(Y') \\ 
	[Y'], & \text{caso contrario}
	\end{cases}
\end{equation*}
y análogamente,
\begin{equation*}
	t(y) = 
	\begin{cases}
		t(y),  & \text{si} \ s(y) \notin V(Y') \\ 
		[Y']. & \text{caso contrario}
	\end{cases}
\end{equation*}


Entonces definamos el grafo de grupos $\cal H$ sobre el grafo conexo $W$ de la siguiente manera,
\begin{itemize}
	\item Si $P \in V(Y) \setminus V(Y')$, tomamos $H_P = G_P$;
	\item Si $P = [Y']$ entonces tomamos $H_P = F(\cG | Y')$.
	\item Si $y \in E(W)$ ponemos $H_y = G_y$ tal que como suponemos válido el resultado \ref{} para $Y'$ tenemos que es un subgrupo.
\end{itemize}

Construyamos un morfismo de grupos $\beta:F(\cG) \to F(\cH)$.
Para eso primero definamoslo sobre los generadores.
Para todo $g \in G_P$ con $P \in V(Y)$ definimos,
\begin{equation*}
	\beta(g) = 
	\begin{cases}
		[g] \in H_P & \text{si} \ P \notin Y' \\
		[g] \in F(\cG | Y') & \text{si} \ P \in Y'  \\ 
	\end{cases}
\end{equation*}
y para toda arista $ y \in E(Y)$ definimos,
\begin{equation*}
	\beta(y) = 
	\begin{cases}
		y  & \text{si} \ y \notin E(Y') \\
		[y] \in F(\cG | Y') & \text{si} \ y \in E(Y')  \\ 
	\end{cases}
\end{equation*}

De manera que así como está definida cumple las relaciones porque $F(\cH)$ también las cumple y así vemos que pasa al cociente y así obtenemos que $\beta$ está bien definida.

\begin{lema}
	El morfismo de grupos $\beta:F(\cG) \to F(\cH)$ es un isomorfismo. 
\end{lema}
\begin{proof}
	Podemos construirnos un morfismo $\alpha:F(\cH) \to F(\cG)$ tal que sea su inversa.
	La construcción es análoga.
	
	Para todo $g \in H_P$ con $P \in V(W) \setminus [Y'] $ definimos,
	\begin{equation*}
		\alpha(g) = [g] \in G_P \ \ 
	\end{equation*}
	y para toda arista $ y \in E(W)$ tal que no empiece ni termine en $[Y']$ definimos,
	\begin{equation*}
		\alpha(y) = y  \ \ \ 
	\end{equation*}
	
	Finalmente sobre $F(\cG | Y')$ definimos de manera análoga mandando todo elemento $g \in G_P$ para para $P \in V(Y')$ a sí mismo en $F(\cG)$ e idénticamente para todas las aristas.
	Es claro que es un morfismo de grupos que a su vez es la inversa de $\beta$ anteriormente definida.
\end{proof}

La moraleja de este lema es que podemos tomar considerar el grupo $F(\cG | Y')$ para un subgrafo $Y'$ conexo y después tomar el grupo $F(\cH)$ para el grafo resultante y es exactamente lo mismo que tomar $F(\cG)$ en el comienzo.

Para cada palabra $(c, \mu)$ del grafo de grupos $F(\cG)$ le vamos a asociar una palabra $(c', \mu')$ de $\cH$ tal que $\beta (|c,\mu|) = |c',\mu'|$.



\begin{lema}
	Si $(c, \mu)$ es una palabra reducida de $\cG$ entonces $(c', \mu')$ lo es de $\cH$.
\end{lema}
\begin{proof}
	
\end{proof}


Finalmente estamos en condiciones de probar el resultado central de esta sección. 

\begin{proof}[(del teorema \ref{})] 
Vamos a demostrar este resultado viéndolo para distintos casos de grafos.
	\begin{enumerate}
		\item El caso que $Y$ es un segmento.
		\item El caso que $Y$ es un árbol.
		\item El caso que $Y$ es un ciclo.
		\item El caso general.
	\end{enumerate}
\end{proof}

\section{Árbol de Bass Serre.}

Vamos a construirnos un revestimiento para un grafo de grupos arbitrario. 
Como el revestimiento universal de todo grafo es un árbol obtendremos un resultado similar en este caso.

Dado $\cG$ un grafo de grupos sobre un grafo $Y$ conexo tomemos un árbol $T$ de expansión de este grafo.
Consideremos también $A$ una orientación de las aristas del grafo $Y$.

Queremos construirnos un grafo $\tilde X$ tal que tenga las siguientes propiedades:

\begin{enumerate}
	\item Una acción de $\pi_1(\cG, T)$ en $\tilde X$.
	\item Un morfismo de grafos sobreyectivo $p:\tilde X \to Y$. 
	\item Unas secciones de los vértices de $Y$ en los de $\tilde X$ e idénticamente secciones en las aristas.
\end{enumerate}

A nuestras secciones las vamos a denotar de manera que para todo vértice $P \in Y$ tendremos un $ \tilde P \in V(\tilde X)$.
Mirando la acción de $\pi_1(\cG, T)$ sobre $\tilde X$ nos gustaría que el estabilizador respecto a $\tilde P$ sea el mismo que el estabilizador de $P$ en el grafo de grupos $\cG$. 
Para esto podemos definir directamente para que $\widehat P \simeq \pi_1(\cG, T) / G_P$.
Análogamente para todas las aristas de nuestro grafo queremos que el estabilizador sea isomorfo al subgrupo $G^y_y$ dentro de $G_{s(y)}$.

Usando estas condiciones tenemos que
\begin{equation*}
	V(\tilde X) = \coprod_{P \in V(Y)} \pi_1(\cG, T) / G_P, \ \  E(\tilde X) = \coprod_{y \in E(Y)} \pi_1(\cG, T) / G_y
\end{equation*}

para obtener un grafo nos queda redefinir para tener las aristas con la otra orientación

\medskip

Por la construcción que hicimos nos queda que $\tilde X / \pi_1(\cG, T) \simeq Y$.

\begin{teo}[Serre]
	El grafo $\tilde X$ anteriormente construido es un árbol.
\end{teo}
\begin{proof}
	Demo no trivial, requiere palabras reducidas.
	Ver \cite{serre2002trees}.
\end{proof}


\begin{deff}
	El grafo $\tilde X$ es el \blue{árbol de Bass Serre} del grafo de grupos $\cG$.
\end{deff}

\begin{ej}
	Hacer un ejemplo así como hice antes.
\end{ej}

Dar conexión con la idea topológica de un revestimiento de un grafo..

\subsection{Acciones de grupos sobre árboles.}

Dar definiciones de los morfismos que salen del árbol y los que van a parar al grupo libre del grafo de grupos.



El siguiente resultado nos da la estructura de un grupo que actúa sobre un grafo conexo sin inversiones de aristas. 
Es el resultado central de la teoría de Bass Serre.

\todo[inline]{La acción de $G$ en realidad es a derecha. Entender bien porqué esto es así porque después facilita la cuenta en la prop posterior.}
\begin{teo}[\cite{serre2002trees}]\label{teo_Serre}
	Sea $G$ un grupo actuando en grafo conexo $X$ sin inversiones de aristas y sea $\cal G$ el grafo de grupos asociado sobre $Y = X / G$.
	Consideremos $T$ un árbol de expansión de $Y$, $\psi: \Xm \to X$ y $\varphi: \pi_1({\cal G}, T) \to G$ luego las siguientes afirmaciones son equivalentes.
	\begin{enumerate}[(a)]
		\item el grafo $\Xm$ es un árbol;
		\item el morfismo $\psi: \Xm \to X$ es un isomorfismo de grafos;
		\item el morfismo $\varphi:\pi_1({\cal G}, T) \to G$ es un isomorfismo de grupos.
	\end{enumerate}
\end{teo}

\begin{proof}	
		 \textbf{$a \implies b$}.
\end{proof}

Como corolarios obtenemos una caracterización para los grupos libres que usaremos varias veces y que es una herramienta fundamental de la teoría geométrica de grupos.

\begin{coro}
	Un grupo $G$ es libre si y solo sí $G$ actúa libremente sobre un árbol sin inversiones de aristas. 
\end{coro}
\begin{proof}
	Si $G$ es libre entonces su grafo de Cayley lo podemos tomar como un árbol y usamos que actúa libremente sobre él sin invertir aristas.
	
	Para la vuelta usamos \ref{teo_Serre} porque es isomorfo a $\pi_1(\cG, T)$ y este grupo es libre por ser el grupo fundamental de un grafo dado que los estabilizadores son triviales por hipótesis.
\end{proof}

\begin{coro}
	Dado $G$ un grupo libre todo subgrupo $H \le G$ resulta ser libre.
\end{coro}
\begin{proof}
	H actúa sobre el mismo árbol que $G$ también sin inversión y libremente.
\end{proof}

Otra consecuencia de este teorema de Serre es un resultado obtenido por Karass, Pietrowski y Solitar que nos da una cota de qué tan grande puede ser un subgrupo libre dentro de un grupo fundamental de un grafo finito de grupos finitos.
Este resultado generaliza la fórmula de Schreier para subgrupos libres.


Primero probamos el siguiente lema sobre grupos libres que nos va a ayudar en la demostración de esta fórmula.

\begin{lema}\label{lema_libre_torsion}
	Todo grupo libre \fg no tiene torsión.
\end{lema}
\begin{proof}
	Como todo grupo libre es tal que su grafo de Cayley se puede tomar como un árbol si tuviera torsión tendría un ciclo contradiciendo que es un árbol.
\end{proof}


\begin{prop}\cite{karrass1973finite}\label{prop_karrass_formula}
	Sea $\cal G$ un grafo de grupos finito con grupos sobre los vértices finitos.
	Sea $G = \pi_1 ({\cal G}, T)$ y sea $F$ un subgrupo libre de $G$ de índice finito con rango $r(F)$.
	Luego la siguiente fórmula vale:
	
	\begin{equation*}
		\frac{r(F) - 1}{(G:F)} = \sum_{y \in E(Y)} \frac{1}{2 \cdot |G_y|} - \sum_{P \in V(Y)} \frac{1}{|G_P|}.
	\end{equation*}
\end{prop}
\todo[inline]{Escribir mejor lo de los dobles cosets del final.}
\begin{proof}
	Sea $\tilde X$ el árbol de Bass Serre para este grafo de grupos $\cG$.
	Notemos que $F$ no interseca a ningún subgrupo de $G$ que sea isomorfo a $G_P$ para ningún $P \in V(Y)$. 
	Esto porque el grupo $F$ es libre y $G_P$ es finito por lo tanto la intersección tendría torsión pero por el lema \ref{lema_libre_torsion} ningún grupo libre tiene torsión.
	De esta manera $F$ es isomorfo al grupo fundamental de $\Xm / F$ con todos los grupos de los vértices triviales justamente porque los estabilizadores lo son.
	
	Dado que $\tilde X$ es un árbol estamos en las hipótesis para usar \ref{teo_Serre} y de esta manera obtenemos que $F \simeq \pi_1 (\widetilde X / F)$.
	Usando esto calculemos el rango del grupo libre contando todas las aristas que no pertenezcan a un árbol de expansión $T'$ del grafo $\Xm / F$.
	Recordemos que al ser un árbol generador tenemos que $\tfrac{1}{2}|E(T')| = |V(\Xm / F)| - 1$. 
	
	\begin{align*}
		r(F) &= \frac{1}{2} (|E(\Xm / F)| - |E(T')|) \\
		&= \frac{1}{2} |E(\Xm / F)| - |V(\Xm / F) | - 1
	\end{align*}

	donde multiplicamos por $\tfrac{1}{2}$ porque todas las aristas las contamos una vez por cada una de las dos orientaciones que tienen.
	
	Finalmente para obtener la fórmula que queremos probar tenemos que usar como está construido el árbol de Bass Serre $\Xm$.
	\begin{equation*}
		|V(\Xm / F)| = \sum_{P \in V(X)} |(G/G_P)/F|
	\end{equation*}
	y acá usamos que que la cantidad de cosets de $(G/G_y)/F$ es la misma que hay en $(F / G)/G_y$
	por lo tanto 
	\begin{equation*}
		|V(\Xm / F)| = \sum_{P \in V(X)} \dfrac{(G:F)}{|G_y|}
	\end{equation*}
	Obtenemos una expresión análoga para las aristas y así terminamos de probar la validez de la fórmula.
\end{proof}

%\begin{teo}
%	Sea $\cal G$ un grafo de grupos sobre un grafo finito $Y$ con grupos \fg en los vértices.
%	Entonces $\pi_1(\cal G)$ es \fg si y solo sí todos los grupos de los vértices lo son.
%\end{teo}
%
%\begin{proof}
%\end{proof}

Finalmente podemos probar que grupo fundamental de un grafo de grupos finito con grupos finitos es es virtualmente libre. 
Antes de probar esto necesitamos un lema sobre acciones en conjuntos finitos.

\begin{lema}\label{lema_acciones_finitas}
	Sea $G$ un grupo que actúa libremente sobre un conjunto finito $X$ de dos maneras distintas $\alpha, \beta : G \to S(X)$. 
	Entonces debe existir $\varphi \in S(X)$ tal que para todo $g \in G$ valga que 
	\[
	\alpha (g) = \varphi^{-1} \circ \beta(g) \circ \varphi.
	\]
\end{lema}
\begin{proof}
	Tomamos representantes para cada acción $R,S \subseteq X$ tales que
	\[
		\bigsqcup_{r \in R} \alpha(G) (r) = \bigsqcup_{s \in S} \beta(G) (s)
	\]
	donde la unión es disjunta como órbitas de esta acción. 
	Como ambas acciones son libres resulta que $\alpha(G)(r)$ y $\beta(G)(s)$ tienen cardinal exactamente $|G|$ usando que $X$ también es finito.
	De esta manera vemos que $|R| = |X| / |G| = |S|$ por lo tanto existe una biyección $\varphi$ entre ambos conjuntos que la extendemos a todo $X$ de la siguiente manera,
	\[
		\varphi (\alpha(g) r) = \beta(g)  s
	\]
	siempre y cuando $\varphi(r) = s$. 
	Esta biyección cumple todo lo que queríamos.
\end{proof}


\begin{teo}\cite{karrass1973finite}
	Sea $\cal G$ un grafo de grupos sobre un grafo finito $Y$ con grupos finitos en los vértices.
	Entonces $\pi_1(\cal G)$ es un \fg virtualmente libre.
\end{teo}
\begin{proof}
	Dado que el grafo $Y$ es finito y los grupos $G_P$ para todo $P \in V(Y)$ también lo son podemos tomarnos $X$ un conjunto finito tal que $|G_P| $ divida a $|X|$ .
	
	Para cada $P \in V(Y)$ podemos armarnos una acción libre de $G_P$ en $X$. 
	Esto nos da un monomorfismo $G_P \to S(X)$.
	A su vez por cada grupo $G_y$ con $y \in E(Y)$ obtenemos dos acciones libres sobre $X$ dependiendo con qué inclusión lo estamos mirando.
	Por el lema \ref{lema_acciones_finitas} podemos elegirnos para cada $y \in E(Y)$ alguna $\varphi_y \in S(X)$ tal que haga conmutar al siguiente diagrama
	\[\begin{tikzcd}
		& {G_{s(y)}} && {S(X)} \\
		{G_y} \\
		& {G_{t(y)}} && {S(X)}
		\arrow["\sigma", from=1-2, to=1-4]
		\arrow["\tau", from=3-2, to=3-4]
		\arrow[hook, from=2-1, to=1-2]
		\arrow[hook', from=2-1, to=3-2]
		\arrow["\varphi_y", from=1-4, to=3-4]
	\end{tikzcd}\]
	Para la arista con orientación opuesta tomamos $\varphi_{\ol y} = \varphi_y^{-1}$.
	De esta manera tenemos un morfismo de grupos definido sobre el grupo libre $\ast_{P \in V(Y)} G_P \ast E(Y)$.
	Por como tomamos a $\varphi_y$ y como hace conmutar al diagrama tenemos que $\varphi_{\ol y} \circ \sigma \circ \varphi_y = \tau$.	
	Usando la definición del grupo $F(\cG)$ tenemos un morfismo de grupos $h: F(\cG) \to S(X)$ tal que la restricción a $G_P$ es inyectiva para todo $P \in V(Y)$.
	Si fijamos $P \in V(Y)$ y consideramos el subgrupo normal de $\pi_1(\cG, P)$ 
	\[
	F = \{  g \in \pi_1(G,P) \ | \ h(g) = 1  \}
	\]
	entonces por como lo consideramos tenemos que $F \cap G_Q = \{ 1 \}$ para todo $Q \in V(Y)$.
	Esto nos dice que el grupo $F$ actúa libremente sobre el árbol de Bass Serre de nuestro grafo de grupos $\cG$.
	A su vez como $F$ es un subgrupo de $\pi_1 (\cG, P)$ tenemos que actúa sin inversiones.
	Estamos en condiciones de usar el teorema de Serre \ref{teo_Serre} y así obtenemos que este grupo debe ser libre. 
	
	Por lo visto obtuvimos que $F$ es un subgrupo libre de $\pi_1(\cG, P)$ y queremos ver que tiene índice finito.
	Para eso notemos que al ser $|X| < \infty$ entonces $|S(X)| < \infty$ y como $S(X) \simeq \pi_1(\cG, P) / F$, por la propiedad universal del cociente, entonces $(\pi_1(\cG, P) : F) < \infty$ tal como queríamos ver.
	
	Finalmente notemos que por \ref{prop_karrass_formula} el grupo $F$ es un \fg tal como queríamos ver.
\end{proof}



\section{Productos semi directos.}

En esta sección vamos a refinar los resultados obtenidos anteriormente para ver que los grupos fundamentales de grafos finitos de grupos finitos y por lo tanto los grupos virtualmente libres se pueden meter dentro de un producto semidirecto $F Q$ donde $F$ es un grupo libre y $Q$ es un cociente finito de $G$.
La referencia de esta sección es el paper \cite{} que a su vez se basó en los métodos del paper de Dahmani-Guirardel.

\begin{prop}
	
\end{prop}
\begin{proof}
	\red{ sorry}
\end{proof}

\begin{ej}
	Ejemplo de $SL_2(\ZZ)$.
\end{ej}

\section{Ends de grupos.}

\begin{deff}
	Ends de grupos
\end{deff}

\begin{obs}
	No dependen de las presentaciones.
\end{obs}

\begin{teo}[Hopf]
	La cantidad de ends de un grupo \fg solo puede ser...
\end{teo}
\begin{proof}
\end{proof}

\begin{deff}
	Grupo accesible.
\end{deff}

\subsection{Accesibilidad en terminos de teoría de grafos.}

\begin{deff}
	Def de VK95 usando grafos.
\end{deff}

\begin{teo}
	Probar que son equivalentes con la otra construcción.
\end{teo}
\begin{proof}
	
\end{proof}


\begin{deff}
	Grafos minor excluded
\end{deff}

\begin{teo}[Khukro]
	Recaracterización de virtualmente libre usando menores de grafos.
\end{teo}
\begin{proof}
\end{proof}

\begin{teo}
	Grupo qi a un árbol $\implies$ minor excluded?
\end{teo}
\begin{proof}
\end{proof}









































\end{document}